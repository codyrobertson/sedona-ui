<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sedona Sync</title>
  <style>
    * { box-sizing: border-box; }
    body { 
      margin: 0; 
      padding: 16px; 
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
      background: #1e1c17;
      color: #ffffff;
      font-size: 14px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255,255,255,0.18);
    }
    
    .logo {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #de7001 0%, #f2883c 100%);
      border-radius: 8px;
      margin: 0 auto 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 16px;
      color: white;
    }
    
    h1 { 
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      color: #ffffff;
    }
    
    .subtitle {
      margin: 4px 0 0;
      font-size: 12px;
      color: rgba(255,255,255,0.6);
    }
    
    .section {
      margin-bottom: 20px;
      padding: 16px;
      background: #2e2b24;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.14);
    }
    
    .section h3 {
      margin: 0 0 12px 0;
      font-size: 14px;
      font-weight: 600;
      color: #ffffff;
    }
    
    .section p {
      margin: 0 0 12px 0;
      font-size: 12px;
      color: rgba(255,255,255,0.75);
      line-height: 1.4;
    }
    
    button {
      width: 100%;
      padding: 10px 16px;
      background: #de7001;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }
    
    button:hover {
      background: #f2883c;
      transform: translateY(-1px);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button.secondary {
      background: #3e3a31;
      color: rgba(255,255,255,0.9);
    }
    
    button.secondary:hover {
      background: #4e4a41;
    }
    
    .status {
      margin-top: 16px;
      padding: 12px;
      border-radius: 6px;
      font-size: 12px;
      display: none;
    }
    
    .status.success {
      background: rgba(33, 166, 94, 0.1);
      color: #21a65e;
      border: 1px solid rgba(33, 166, 94, 0.2);
    }
    
    .status.error {
      background: rgba(230, 72, 61, 0.1);
      color: #e6483d;
      border: 1px solid rgba(230, 72, 61, 0.2);
    }
    
    .features {
      display: grid;
      gap: 8px;
      margin: 12px 0;
    }
    
    .feature {
      display: flex;
      align-items: center;
      font-size: 12px;
      color: rgba(255,255,255,0.75);
    }
    
    .feature::before {
      content: '‚úì';
      color: #21a65e;
      margin-right: 8px;
      font-weight: bold;
    }
    
    .loading {
      display: none;
      text-align: center;
      color: rgba(255,255,255,0.6);
      font-size: 12px;
      margin-top: 12px;
    }
    
    .spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 50%;
      border-top-color: #de7001;
      animation: spin 1s ease-in-out infinite;
      margin-right: 8px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">S</div>
    <h1>Sedona Sync</h1>
    <div class="subtitle">React ‚Üî Figma Design System</div>
  </div>

  <div class="section">
    <h3>üé® Tokens Sync</h3>
    <p>Sync Tailwind variables to Figma design tokens. Creates the foundation, semantic, and brand variable layers.</p>
    <div class="features">
      <div class="feature">Foundation colors (surface, text, accent)</div>
      <div class="feature">Typography variables (size, weight, family)</div>
      <div class="feature">Spacing & border radius scale</div>
      <div class="feature">Opacity & gradient definitions</div>
      <div class="feature">3-layer hierarchy: Foundation ‚Üí Semantic ‚Üí Brand</div>
    </div>
    <button onclick="syncTokens()">Sync Tokens</button>
  </div>

  <div class="section">
    <h3>üìù Styles Sync</h3>
    <p>Create Figma text styles using the design tokens. Requires tokens to be synced first.</p>
    <div class="features">
      <div class="feature">Heading styles (H1, H2, H3)</div>
      <div class="feature">Body text styles (Large, Medium, Small)</div>
      <div class="feature">Caption & code text styles</div>
      <div class="feature">All styles use variable references</div>
    </div>
    <button onclick="syncStyles()">Sync Styles</button>
  </div>

  <div class="section">
    <h3>üß© Components Sync</h3>
    <p>Convert React components to Figma components with proper naming, variants, and auto-layout.</p>
    <div class="features">
      <div class="feature">Button variants & states</div>
      <div class="feature">Form components</div>
      <div class="feature">Navigation elements</div>
      <div class="feature">Chat interface components</div>
    </div>
    <button onclick="syncComponents()">Sync Components</button>
  </div>

  <div class="section">
    <h3>üöÄ Create Complete System</h3>
    <p>Set up the entire design system: tokens, components, and documentation pages.</p>
    <button onclick="createDesignSystem()">Create Full Design System</button>
  </div>

  <div class="section">
    <h3>‚öôÔ∏è Advanced Options</h3>
    <button class="secondary" onclick="showAdvancedOptions()">Advanced Settings</button>
  </div>

  <div class="loading" id="loading">
    <div class="spinner"></div>
    <span id="loadingText">Syncing...</span>
  </div>

  <div class="status" id="status"></div>

  <script>
    // Communication with the plugin's main thread
    function postMessage(type, data = {}) {
      parent.postMessage({
        pluginMessage: {
          type,
          ...data
        }
      }, '*');
    }

    function showLoading(text = 'Syncing...') {
      document.getElementById('loading').style.display = 'block';
      document.getElementById('loadingText').textContent = text;
      hideStatus();
    }

    function hideLoading() {
      document.getElementById('loading').style.display = 'none';
    }

    function showStatus(message, isError = false) {
      const status = document.getElementById('status');
      status.textContent = message;
      status.className = isError ? 'status error' : 'status success';
      status.style.display = 'block';
      hideLoading();
    }

    function hideStatus() {
      document.getElementById('status').style.display = 'none';
    }

    function syncTokens() {
      showLoading('Syncing design tokens...');
      postMessage('sync-tokens');
    }

    function syncStyles() {
      showLoading('Creating text styles...');
      postMessage('sync-styles');
    }

    function syncComponents() {
      showLoading('Syncing React components...');
      postMessage('sync-components', {
        components: [
          {
            name: 'Button',
            variants: ['primary', 'secondary', 'tertiary', 'ghost'],
            states: ['default', 'hover', 'pressed', 'disabled'],
            sizes: ['sm', 'md', 'lg']
          },
          {
            name: 'Input',
            variants: ['default', 'error', 'success'],
            states: ['default', 'focused', 'disabled']
          },
          {
            name: 'Card',
            variants: ['default', 'outline'],
            elevation: ['none', 'sm', 'md', 'lg']
          }
          // More components will be added based on the actual component analysis
        ]
      });
    }

    function createDesignSystem() {
      showLoading('Creating complete design system...');
      postMessage('create-design-system', {
        config: {
          tailwindConfig: {
            // Full Tailwind config will be passed
          },
          components: [
            // Full component list will be passed
          ]
        }
      });
    }

    function showAdvancedOptions() {
      // TODO: Implement advanced options modal
      alert('Advanced options coming soon!');
    }

    // Listen for messages from the plugin's main thread
    window.onmessage = (event) => {
      const msg = event.data.pluginMessage;
      
      if (msg.type === 'sync-complete') {
        if (msg.success) {
          showStatus(msg.message);
        } else {
          showStatus(msg.message, true);
        }
      } else if (msg.type === 'tailwind-config') {
        // Process the actual Tailwind config
        processTailwindConfig(msg.config);
      }
    };

    // Initialize
    hideLoading();
    hideStatus();
  </script>
</body>
</html>