{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "elimination-progress",
  "type": "registry:ui",
  "title": "Elimination Progress",
  "description": "Progress indicator showing elimination status with rank and threshold display",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "trading-utils"
  ],
  "files": [
    {
      "path": "components/ui/elimination-progress.tsx",
      "type": "registry:ui",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { parseMarketCap } from \"@/lib/trading-utils\"\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\nexport type EliminationStatus = \"safe\" | \"close\" | \"risk\"\n\nexport interface EliminationProgressProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  /** Current rank (1 = best) */\n  rank: number\n  /** Total number of agents */\n  totalAgents: number\n  /** Current market cap (e.g., \"$45.2K\") */\n  marketCap: string\n  /** Elimination threshold (e.g., \"$5K\") */\n  eliminationThreshold: string\n  /** Display variant */\n  variant?: \"default\" | \"compact\"\n}\n\n// =============================================================================\n// HELPERS\n// =============================================================================\n\nfunction calculateStatus(\n  rank: number,\n  totalAgents: number,\n  marketCap: string,\n  threshold: string\n): EliminationStatus {\n  const rankPercentile = rank / totalAgents\n  const mcapValue = parseMarketCap(marketCap)\n  const thresholdValue = parseMarketCap(threshold)\n\n  if (mcapValue < thresholdValue) return \"risk\"\n  if (mcapValue < thresholdValue * 2 || rankPercentile > 0.8) return \"close\"\n  if (rankPercentile > 0.6) return \"close\"\n  return \"safe\"\n}\n\nfunction getStatusLabel(status: EliminationStatus): string {\n  switch (status) {\n    case \"safe\":\n      return \"SAFE\"\n    case \"close\":\n      return \"CLOSE\"\n    case \"risk\":\n      return \"AT RISK\"\n  }\n}\n\nconst statusColors = {\n  safe: {\n    bar: \"bg-green-500\",\n    text: \"text-green-500\",\n    badge: \"bg-green-500/10 text-green-500 border-green-500/20\",\n  },\n  close: {\n    bar: \"bg-yellow-500\",\n    text: \"text-yellow-500\",\n    badge: \"bg-yellow-500/10 text-yellow-500 border-yellow-500/20\",\n  },\n  risk: {\n    bar: \"bg-red-500\",\n    text: \"text-red-500\",\n    badge: \"bg-red-500/10 text-red-500 border-red-500/20\",\n  },\n}\n\n// =============================================================================\n// COMPONENT\n// =============================================================================\n\nconst EliminationProgress = React.forwardRef<\n  HTMLDivElement,\n  EliminationProgressProps\n>(\n  (\n    {\n      className,\n      rank,\n      totalAgents,\n      marketCap,\n      eliminationThreshold,\n      variant = \"default\",\n      ...props\n    },\n    ref\n  ) => {\n    const status = calculateStatus(\n      rank,\n      totalAgents,\n      marketCap,\n      eliminationThreshold\n    )\n    const statusLabel = getStatusLabel(status)\n    const colors = statusColors[status]\n\n    // Progress position (inverted: rank 1 = 100%, rank N = 0%)\n    const progressPercent = ((totalAgents - rank + 1) / totalAgents) * 100\n\n    if (variant === \"compact\") {\n      return (\n        <div\n          ref={ref}\n          className={cn(\"flex items-center gap-3\", className)}\n          {...props}\n        >\n          {/* Mini progress bar */}\n          <div className=\"flex-1 h-1.5 bg-muted rounded-full overflow-hidden\">\n            <div\n              className={cn(\"h-full rounded-full transition-all\", colors.bar)}\n              style={{ width: `${progressPercent}%` }}\n            />\n          </div>\n          {/* Status badge */}\n          <span\n            className={cn(\n              \"px-2 py-0.5 text-[10px] font-semibold rounded border\",\n              colors.badge\n            )}\n          >\n            {statusLabel}\n          </span>\n        </div>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"rounded-lg bg-card border border-border p-4\",\n          className\n        )}\n        {...props}\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-3\">\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wider\">\n            Elimination Progress\n          </span>\n          <span\n            className={cn(\n              \"px-2 py-0.5 text-[10px] font-semibold rounded border\",\n              colors.badge\n            )}\n          >\n            {statusLabel}\n          </span>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"relative mb-3\">\n          {/* Background segments */}\n          <div className=\"h-2 rounded-full overflow-hidden flex\">\n            <div className=\"w-[20%] bg-red-500/20\" />\n            <div className=\"w-[20%] bg-yellow-500/20\" />\n            <div className=\"w-[60%] bg-green-500/20\" />\n          </div>\n\n          {/* Filled progress */}\n          <div\n            className={cn(\n              \"absolute top-0 left-0 h-2 rounded-full transition-all duration-500\",\n              colors.bar\n            )}\n            style={{ width: `${progressPercent}%` }}\n          />\n\n          {/* Position marker */}\n          <div\n            className=\"absolute top-full mt-1 -translate-x-1/2 transition-all duration-500\"\n            style={{ left: `${progressPercent}%` }}\n          >\n            <div\n              className={cn(\n                \"w-0 h-0 border-l-[5px] border-r-[5px] border-b-[6px] border-l-transparent border-r-transparent\",\n                status === \"safe\" && \"border-b-green-500\",\n                status === \"close\" && \"border-b-yellow-500\",\n                status === \"risk\" && \"border-b-red-500\"\n              )}\n            />\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-between mt-4 pt-2 border-t border-border\">\n          <span className=\"text-sm text-muted-foreground\">\n            Rank <span className=\"font-mono font-medium text-foreground\">#{rank}</span>\n            <span className=\"text-muted-foreground/60\"> of {totalAgents}</span>\n          </span>\n          <span className=\"text-xs text-muted-foreground\">\n            Threshold: <span className=\"font-medium\">{eliminationThreshold}</span>\n          </span>\n        </div>\n      </div>\n    )\n  }\n)\n\nEliminationProgress.displayName = \"EliminationProgress\"\n\nexport { EliminationProgress, calculateStatus, getStatusLabel }\n"
    }
  ]
}