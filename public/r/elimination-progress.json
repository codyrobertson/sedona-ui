{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "elimination-progress",
  "type": "registry:ui",
  "title": "Elimination Progress",
  "description": "Progress indicator showing elimination status with rank and threshold display",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "trading-utils"
  ],
  "files": [
    {
      "path": "components/ui/elimination-progress.tsx",
      "type": "registry:ui",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Badge } from \"@/components/ui/badge\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\nimport { Icon } from \"@/components/ui/icon\"\nimport { parseMarketCap } from \"@/fixtures\"\n\nexport type EliminationStatus = \"safe\" | \"close\" | \"risk\"\n\nexport interface EliminationProgressProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** Current rank (1 = best) */\n  rank: number\n  /** Total number of agents */\n  totalAgents: number\n  /** Current market cap (e.g., \"$45.2K\") */\n  marketCap: string\n  /** Elimination threshold (e.g., \"$5K\") */\n  eliminationThreshold: string\n  /** Display variant */\n  variant?: \"default\" | \"inline\"\n}\n\n/**\n * Calculate elimination status based on rank and market cap\n *\n * Rules:\n * - SAFE: rank in top 60% AND market cap above threshold\n * - CLOSE: rank 60-80% OR market cap near threshold (within 2x)\n * - AT RISK: rank bottom 20% OR market cap below threshold\n */\nfunction calculateStatus(\n  rank: number,\n  totalAgents: number,\n  marketCap: string,\n  threshold: string\n): EliminationStatus {\n  const rankPercentile = rank / totalAgents\n  const mcapValue = parseMarketCap(marketCap)\n  const thresholdValue = parseMarketCap(threshold)\n\n  // Below threshold = AT RISK\n  if (mcapValue < thresholdValue) {\n    return \"risk\"\n  }\n\n  // Near threshold (within 2x) OR bottom 20% = CLOSE\n  if (mcapValue < thresholdValue * 2 || rankPercentile > 0.8) {\n    return \"close\"\n  }\n\n  // Mid-range (60-80%) = CLOSE\n  if (rankPercentile > 0.6) {\n    return \"close\"\n  }\n\n  // Top 60% AND well above threshold = SAFE\n  return \"safe\"\n}\n\n/**\n * Get status label text\n */\nfunction getStatusLabel(status: EliminationStatus): string {\n  switch (status) {\n    case \"safe\":\n      return \"SAFE\"\n    case \"close\":\n      return \"CLOSE\"\n    case \"risk\":\n      return \"AT RISK\"\n  }\n}\n\nconst EliminationProgress = React.forwardRef<HTMLDivElement, EliminationProgressProps>(\n  (\n    {\n      className,\n      rank,\n      totalAgents,\n      marketCap,\n      eliminationThreshold,\n      variant = \"default\",\n      ...props\n    },\n    ref\n  ) => {\n    const status = calculateStatus(rank, totalAgents, marketCap, eliminationThreshold)\n    const statusLabel = getStatusLabel(status)\n\n    // Progress position (inverted: rank 1 = 100%, rank N = 0%)\n    const progressPercent = ((totalAgents - rank + 1) / totalAgents) * 100\n\n    // Status colors\n    const statusColors = {\n      safe: {\n        bar: \"bg-zeus-status-success\",\n        marker: \"border-zeus-status-success\",\n        text: \"text-zeus-status-success\",\n        glow: \"shadow-[0_0_8px_rgba(135,214,138,0.5)]\",\n      },\n      close: {\n        bar: \"bg-zeus-accent-orange\",\n        marker: \"border-zeus-accent-orange\",\n        text: \"text-zeus-accent-orange\",\n        glow: \"shadow-[0_0_8px_rgba(251,151,4,0.5)]\",\n      },\n      risk: {\n        bar: \"bg-zeus-status-destructive\",\n        marker: \"border-zeus-status-destructive\",\n        text: \"text-zeus-status-destructive\",\n        glow: \"shadow-[0_0_8px_rgba(231,93,87,0.5)]\",\n      },\n    }\n\n    const colors = statusColors[status]\n\n    // Inline variant - arc gauge with text underneath\n    if (variant === \"inline\") {\n      // Arc gauge parameters\n      const size = 60\n      const strokeWidth = 6\n      const radius = (size - strokeWidth) / 2\n      const circumference = radius * Math.PI // Half circle\n      const filledLength = (progressPercent / 100) * circumference\n\n      // Get arc color based on status\n      const arcColor = status === \"safe\"\n        ? \"#87D68A\" // green\n        : status === \"close\"\n          ? \"#FB9704\" // orange\n          : \"#E75D57\" // red\n\n      return (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger asChild>\n              <div\n                ref={ref}\n                className={cn(\"flex flex-col items-center cursor-help\", className)}\n                {...props}\n              >\n                {/* Arc gauge */}\n                <div className=\"relative\" style={{ width: size, height: size / 2 + 6 }}>\n                  <svg\n                    width={size}\n                    height={size / 2 + 6}\n                    viewBox={`0 0 ${size} ${size / 2 + 6}`}\n                    className=\"overflow-visible\"\n                  >\n                    {/* Background arc */}\n                    <path\n                      d={`M ${strokeWidth / 2} ${size / 2} A ${radius} ${radius} 0 0 1 ${size - strokeWidth / 2} ${size / 2}`}\n                      fill=\"none\"\n                      stroke=\"rgba(255,255,255,0.12)\"\n                      strokeWidth={strokeWidth}\n                      strokeLinecap=\"round\"\n                    />\n                    {/* Filled arc */}\n                    <path\n                      d={`M ${strokeWidth / 2} ${size / 2} A ${radius} ${radius} 0 0 1 ${size - strokeWidth / 2} ${size / 2}`}\n                      fill=\"none\"\n                      stroke={arcColor}\n                      strokeWidth={strokeWidth}\n                      strokeLinecap=\"round\"\n                      strokeDasharray={`${filledLength} ${circumference}`}\n                      className=\"transition-all duration-500\"\n                    />\n                  </svg>\n                  {/* Percentage inside arc */}\n                  <div className=\"absolute inset-0 flex items-end justify-center pb-1\">\n                    <span className={cn(\"text-base font-bold leading-none tabular-nums\", colors.text)}>\n                      {Math.round(progressPercent)}%\n                    </span>\n                  </div>\n                </div>\n                {/* Label underneath */}\n                <span className=\"text-[10px] text-zeus-text-tertiary uppercase tracking-wider mt-0.5\">\n                  from goal\n                </span>\n              </div>\n            </TooltipTrigger>\n            <TooltipContent side=\"bottom\" className=\"max-w-[200px]\">\n              <p className=\"text-xs leading-relaxed\">\n                <span className=\"font-semibold\">Rank #{rank}</span> of {totalAgents} agents.\n                <br />\n                Stay above {eliminationThreshold} market cap to avoid elimination.\n              </p>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      )\n    }\n\n    // Default variant - full card display\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"rounded-lg bg-zeus-surface-elevated border border-zeus-border-alpha p-3\",\n          className\n        )}\n        {...props}\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-2\">\n          <span className=\"text-[10px] font-semibold tracking-wider text-zeus-text-tertiary uppercase\">\n            Elim. Progress\n          </span>\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <button className=\"p-0.5 rounded hover:bg-zeus-surface-neutral transition-colors\">\n                  <Icon icon=\"circle-info\" className=\"w-3.5 h-3.5 text-zeus-text-quaternary\" />\n                </button>\n              </TooltipTrigger>\n              <TooltipContent side=\"left\" className=\"max-w-[200px]\">\n                <p className=\"text-xs\">\n                  Agents are ranked by market cap. Bottom performers risk elimination each round.\n                  Stay above {eliminationThreshold} to remain safe.\n                </p>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"relative mb-2\">\n          {/* Background track with segments */}\n          <div className=\"h-2 rounded-full overflow-hidden flex\">\n            {/* Risk zone (0-20%) */}\n            <div className=\"w-[20%] bg-zeus-status-destructive/20\" />\n            {/* Close zone (20-40%) */}\n            <div className=\"w-[20%] bg-zeus-accent-orange/20\" />\n            {/* Safe zone (40-100%) */}\n            <div className=\"w-[60%] bg-zeus-status-success/20\" />\n          </div>\n\n          {/* Filled progress */}\n          <div\n            className={cn(\n              \"absolute top-0 left-0 h-2 rounded-full transition-all duration-500\",\n              colors.bar\n            )}\n            style={{ width: `${progressPercent}%` }}\n          />\n\n          {/* Position marker */}\n          <div\n            className=\"absolute top-full mt-0.5 -translate-x-1/2 transition-all duration-500\"\n            style={{ left: `${progressPercent}%` }}\n          >\n            <div\n              className={cn(\n                \"w-0 h-0 border-l-[5px] border-r-[5px] border-b-[6px] border-l-transparent border-r-transparent\",\n                colors.marker.replace(\"border-\", \"border-b-\")\n              )}\n            />\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-between mt-3\">\n          <span className=\"text-caption-s text-zeus-text-secondary font-mono\">\n            #{rank} <span className=\"text-zeus-text-quaternary\">of {totalAgents}</span>\n          </span>\n          <Badge variant={status} size=\"sm\">\n            {statusLabel}\n          </Badge>\n        </div>\n      </div>\n    )\n  }\n)\n\nEliminationProgress.displayName = \"EliminationProgress\"\n\nexport { EliminationProgress, calculateStatus, getStatusLabel }\n"
    }
  ]
}